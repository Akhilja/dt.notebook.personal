{"version":"5","defaultTimeframe":{"from":"now()-2h","to":"now()"},"sections":[{"id":"65c49b5b-17b1-4ee1-9c74-5d5634b5c46a","type":"dql","showTitle":false,"drilldownPath":[],"state":{"input":{"value":"timeseries thisweek = avg(dt.host.memory.usage), from: now() -4h, by:{dt.entity.host}\n| fieldsAdd  lastweek = lookup ([timeseries mem = avg(dt.host.memory.usage), from: now () -8h, to: now () -4h, by:{dt.entity.host}], sourceField: dt.entity.host, lookupField: dt.entity.host)[mem]\n|fields dt.entity.host, cpuThisWeek = arrayAvg(thisweek), cpuLastweek = arrayavg(lastweek)\n|fieldsAdd diff = cpuThisWeek - cpuLastweek\n| sort abs(diff) desc\n| fieldsAdd indicator = if( abs(diff) < 10,  \"游리\", else:  if( abs(diff) > 10, \"游삕\" ))\n// https://unicode.org/emoji/charts/emoji-list.html#1fae6","timeframe":{"from":"now()-2h","to":"now()"}},"visualizationSettings":{"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{"categoryAxis":"dt.entity.host","valueAxis":"cpuThisWeek","categoryAxisLabel":"dt.entity.host","valueAxisLabel":"cpuThisWeek"},"hiddenLegendFields":[]},"singleValue":{"alignment":"center","label":"","recordField":"error","autoscale":true},"table":{"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0},"thresholds":[],"honeycomb":{"shape":"hexagon","dataMappings":{"category":"dt.entity.host","value":"cpuThisWeek"},"legend":"auto"},"histogram":{"dataMappings":[{"valueAxis":"cpuThisWeek","rangeAxis":""},{"valueAxis":"cpuLastweek","rangeAxis":""},{"valueAxis":"diff","rangeAxis":""}]}},"querySettings":{"maxResultRecords":1000,"defaultScanLimitGbytes":500,"maxResultMegaBytes":1,"defaultSamplingRatio":10,"enableSampling":false},"visualization":"table","state":"success","result":{"code":200,"value":{"records":[{"dt.entity.host":"HOST-B9788D4FFD9EFD16","cpuThisWeek":71.18440259015765,"cpuLastweek":68.21731676324185,"diff":2.967085826915792,"indicator":"游리"}],"metadata":{"grail":{"canonicalQuery":"timeseries by:{dt.entity.host}, from:now() - 4h, thisweek = avg(dt.host.memory.usage)\n| fieldsAdd lastweek = lookup([timeseries by:{dt.entity.host}, from:now() - 8h, to:now() - 4h, mem = avg(dt.host.memory.usage)], sourceField:dt.entity.host, lookupField:dt.entity.host)[mem]\n| fields dt.entity.host, cpuThisWeek = arrayAvg(thisweek), cpuLastweek = arrayAvg(lastweek)\n| fieldsAdd diff = cpuThisWeek - cpuLastweek\n| sort abs(diff) desc\n| fieldsAdd indicator = if(abs(diff) < 10, \"游리\", else:if(abs(diff) > 10, \"游삕\"))","timezone":"Asia/Calcutta","query":"timeseries thisweek = avg(dt.host.memory.usage), from: now() -4h, by:{dt.entity.host}\n| fieldsAdd  lastweek = lookup ([timeseries mem = avg(dt.host.memory.usage), from: now () -8h, to: now () -4h, by:{dt.entity.host}], sourceField: dt.entity.host, lookupField: dt.entity.host)[mem]\n|fields dt.entity.host, cpuThisWeek = arrayAvg(thisweek), cpuLastweek = arrayavg(lastweek)\n|fieldsAdd diff = cpuThisWeek - cpuLastweek\n| sort abs(diff) desc\n| fieldsAdd indicator = if( abs(diff) < 10,  \"游리\", else:  if( abs(diff) > 10, \"游삕\" ))\n// https://unicode.org/emoji/charts/emoji-list.html#1fae6","scannedRecords":0,"dqlVersion":"V1_0","scannedBytes":0,"scannedDataPoints":495,"analysisTimeframe":{"start":"2024-07-02T01:02:00.000Z","end":"2024-07-02T09:04:00.000Z"},"locale":"und","executionTimeMilliseconds":60,"notifications":[],"queryId":"b573bc99-a55d-4610-8bf4-bad936cb0b3b","sampled":false},"metrics":[{"metric.key":"dt.host.memory.usage","fieldName":"thisweek"},{"metric.key":"dt.host.memory.usage","fieldName":"mem"}]},"types":[{"mappings":{"dt.entity.host":{"type":"string"},"cpuThisWeek":{"type":"double"},"cpuLastweek":{"type":"double"},"diff":{"type":"double"},"indicator":{"type":"string"}},"indexRange":[0,0]}]},"notifications":[],"dateTime":"2024-07-02T09:02:33.537Z","input":{"value":"timeseries thisweek = avg(dt.host.memory.usage), from: now() -4h, by:{dt.entity.host}\n| fieldsAdd  lastweek = lookup ([timeseries mem = avg(dt.host.memory.usage), from: now () -8h, to: now () -4h, by:{dt.entity.host}], sourceField: dt.entity.host, lookupField: dt.entity.host)[mem]\n|fields dt.entity.host, cpuThisWeek = arrayAvg(thisweek), cpuLastweek = arrayavg(lastweek)\n|fieldsAdd diff = cpuThisWeek - cpuLastweek\n| sort abs(diff) desc\n| fieldsAdd indicator = if( abs(diff) < 10,  \"游리\", else:  if( abs(diff) > 10, \"游삕\" ))\n// https://unicode.org/emoji/charts/emoji-list.html#1fae6","timeframe":{"from":"now()-2h","to":"now()"}}}}}]}